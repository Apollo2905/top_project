{% extends 'base_layout.html' %}
{% load static from static %}

{% block content %}
<div class="box has-text-centered" style="min-width: 100% ">
    <div class="has-text-right">
        {% if post.author == user %}
        <a href="{% url 'blog:edit_post' post.slug %}" class="button is-info">
            <ion-icon name="create-outline"></ion-icon>
        </a>
        <a href="{% url 'blog:delete_post' post.slug %}" class="button is-danger">
            <ion-icon name="trash-outline"></ion-icon>
        </a>
        {% endif %}
    </div>
    <div class="title has-text-black">
        {{post}}
    </div>
    {% if post.image %}
    <img src="{{post.image.url}}" alt="" class="image is-centered post-image">
    {% else %}
    <img src="{% static 'images/image.jpg' %}" alt="" class="image is-centered post-image">
    <!--<div></div> сделать так, чтобы картинка не была обязательной-->
    {% endif %}

    <div class="subtitle has-text-black">
        {{post.text}}
    </div>
    <div class="columns is-gapless">
        <form method="post" class="has-text-right" action="{% url 'blog:like' post.slug %}">
            {% csrf_token %}
            <button class="button  {% if user in post.likes.all %} is-success {% endif %} " type="submit">
                <ion-icon name="thumbs-up-outline"></ion-icon>
                <span class="ml-3">
                    {{ post.likes_counter }}
                </span>
            </button>
        </form>
        <form method="post" class="has-text-right" action="{% url 'blog:dislike' post.slug %}">
            {% csrf_token %}
            <button class=" button {% if user in post.dislikes.all %} is-danger {% endif %} " type="submit">
                <ion-icon name="thumbs-down-outline"></ion-icon>
                <span class="ml-3">
                    {{ post.dislikes_counter }}
                </span>
            </button>
        </form>
    </div>
    <div class="subtitle is-6">
        {% if post.author == user %}
        published by you
        {% else %}
        by {{ post.author }}
        {% endif %}
        <div>{{post.date}}</div>
    </div>
</div>
{% endblock %}